spring.application.name=api-gateway
server.port=8080

# JPA / Flyway datasource (H2 by default)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:apigatewaydb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=

spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false

spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

# Gateway routes (static fallbacks)
spring.cloud.gateway.routes[0].id=users
spring.cloud.gateway.routes[0].uri=${USER_SERVICE_URL:http://localhost:8083}
spring.cloud.gateway.routes[0].predicates[0]=Path=/api/users/**

spring.cloud.gateway.routes[1].id=events
spring.cloud.gateway.routes[1].uri=${EVENT_SERVICE_URL:http://localhost:8081}
spring.cloud.gateway.routes[1].predicates[0]=Path=/api/events/**

spring.cloud.gateway.routes[2].id=bookings
spring.cloud.gateway.routes[2].uri=${BOOKING_SERVICE_URL:http://localhost:8082}
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/bookings/**

# Security - OAuth2 Resource Server (Keycloak)
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${KEYCLOAK_JWK_URI:}

# Logging
logging.level.org.springframework.security=INFO
